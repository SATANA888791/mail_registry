{% if attachments %}
<table class="table table-striped align-middle">
  <thead>
    <tr>
      <th>üìÅ –ò–º—è —Ñ–∞–π–ª–∞</th>
      <th class="text-end">–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
  </thead>
  <tbody>
    {% for att in attachments %}
    <tr>
      <td>{{ att.filename | file_icon }} {{ att.filename | e }}</td>
      <td class="text-end">
        <a href="{{ url_for('outgoing.attachments', letter_id=letter.id, download=att.id) }}"
          class="btn btn-sm btn-outline-primary me-2">
          üì• –°–∫–∞—á–∞—Ç—å
        </a>
        {% if current_user.id == letter.user_id or current_user.role.name == 'Admin' %}
        <form method="POST"
          action="{{ url_for('outgoing.delete_attachment', letter_id=letter.id, attachment_id=att.id) }}"
          style="display:inline;">
          <button type="submit" class="btn btn-sm btn-outline-danger"
            onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª {{ att.filename }}?')">
            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
          </button>
        </form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="alert alert-info text-center">
  –ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.
</div>
{% endif %}

{% if current_user.id == letter.user_id or current_user.role.name in ['Admin'] %}
<form method="POST" enctype="multipart/form-data" class="mt-3">
  <div class="input-group">
    <input type="file" name="file" class="form-control" required
      accept="{{ allowed_extensions | join(',') | prepend_dot }}">
    <button type="submit" class="btn btn-outline-secondary">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
  </div>
  <small class="form-text text-muted">
    –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç—ã: pdf, doc, docx, xls, xlsx, rar. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50 –ú–ë
  </small>
</form>
{% endif %}